Install vmwareworkstation
Install virtualbox

Download iso of archlinux

create virtual machine 50G

Insert iso archlinux inside your virtualmachine

lunch your virtual machine with boot and with the iso of archlinux.

#STEP_1

loadkey us

#STEP_2

enable the ssh for remote from your computer (is very simple with remote ssh ^^)

passwd 

and write mdp toor

check status of ssh service

systemctl status
systemctl start

#STEP_3

+ make partition 1 512Mo

sgdisk /dev/sda -n1:0Mib:513MiB -t1:EF00

+ make partiton 2 with the next all

sgdisk /dev/sda -n2:+0:-0

#STEP_4

+ Initialisatione of physical volume 

pvcreate /dev/sda2

#STEP_5

+ make volume logic 

vgcreate archlvm /dev/sda2

#STEP_6

+ make logic volum

lvcreate -L 5G -n root archlvm
lvcreate -L 2G -n swap archlvm
lvcreate -L 1G -n tmp archlvm
lvcreate -l 100%FREE -n home archlvm

#STEP_7 

+ make cryto for boot partition

#cryptsetup luksFormat -c aes-xts-plain64 -s 512 /dev/archlvm/root


cryptsetup --type luks2 --pbkdf argon2id --cipher serpent-xts-plain64 --key-size 512 --hash sha512 --use-random --verify-passphrase luksFormat /dev/sda

#STEP_8

+ test your crypto

cryptsetup open /dev/archlvm/root root

#STEP_9

+ make filesystem and mount 

mkfs.xfs /dev/mapper/root
mount /dev/mapper/root /mnt

#STEP_9

+ build and  mount partition of boot

mkfs.fat -F32 /dev/sda1
mkdir /mnt/boot
mount /dev/sda1 /mnt/boot

#STEP_10

+ Install paquet

pacman -Sy pacman-contrib

#STEP_11

+ backup original mirror 

cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup

#STEP_12

+ select best mirror ranked and add

rankmirrors -n 3 /etc/pacman.d/mirrorlist.backup > /etc/pacman.d/mirrorlist

#STEP_13

+ Install base system paquet


pacstrap /mnt base base-devel lvm2 nmap jq curl cryptsetup xfsprogs linux-lts linux-lts-headers linux-firmware zip unzip p7zip mlocate vim alsa-utils syslog-ng mtools dosfstools lsb-release ntfs-3g exfat-utils bash-completion zsh zsh-completions git grub efibootmgr os-prober






